<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Puissance 4</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #676767;
            flex-direction: column;
        }
        #board {
            display: grid;
            grid-template-columns: repeat(7, 50px);
            grid-template-rows: repeat(6, 50px);
            gap: 5px;
            border-radius: 20;
        }
        .cell {
            border-radius: 25px;
            width: 50px;
            height: 50px;
            background-color: rgb(184, 184, 184);
            border: 1px solid #3f3939;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
        }
        .controls {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .red {
            background-color: red;
        }
        .yellow {
            background-color: yellow;
        }
        .blurred {
            filter: blur(5px);
        }
    </style>
</head>
<body>
    <div id="board"></div>
    <div class="controls">
        <input type="text" id="player1-input" placeholder="Mise du Joueur 1">
        <button onclick="blurInput('player1-input')">Flouter</button>
        <input type="text" id="player2-input" placeholder="Mise du Joueur 2">
        <button onclick="blurInput('player2-input')">Flouter</button>
        <button onclick="restartGame()">Recommencer</button>
    </div>
    <script>
        const rows = 6;
        const columns = 7;
        let board = [];
        let currentPlayer = 'red';

        function createBoard() {
            const boardElement = document.getElementById('board');
            boardElement.innerHTML = '';
            board = [];
            for (let r = 0; r < rows; r++) {
                board[r] = [];
                for (let c = 0; c < columns; c++) {
                    const cell = document.createElement('div');
                    cell.classList.add('cell');
                    cell.addEventListener('click', () => placeDisc(c));
                    boardElement.appendChild(cell);
                    board[r][c] = null;
                }
            }
        }

        function placeDisc(column) {
            for (let r = rows - 1; r >= 0; r--) {
                if (!board[r][column]) {
                    board[r][column] = currentPlayer;
                    updateBoard();
                    if (checkWinner()) {
                        declareWinner(currentPlayer);
                    } else {
                        currentPlayer = currentPlayer === 'red' ? 'yellow' : 'red';
                    }
                    return;
                }
            }
        }

        function updateBoard() {
            const cells = document.querySelectorAll('.cell');
            let index = 0;
            for (let r = 0; r < rows; r++) {
                for (let c = 0; c < columns; c++) {
                    if (board[r][c]) {
                        cells[index].classList.add(board[r][c]);
                    } else {
                        cells[index].classList.remove('red', 'yellow');
                    }
                    index++;
                }
            }
        }

        function checkWinner() {
            const directions = [
                { r: 0, c: 1 }, { r: 1, c: 0 }, { r: 1, c: 1 }, { r: 1, c: -1 }
            ];
            for (let r = 0; r < rows; r++) {
                for (let c = 0; c < columns; c++) {
                    if (board[r][c]) {
                        for (let {r: dr, c: dc} of directions) {
                            if (checkDirection(r, c, dr, dc)) return true;
                        }
                    }
                }
            }
            return false;
        }

        function checkDirection(r, c, dr, dc) {
            let color = board[r][c];
            for (let i = 1; i < 4; i++) {
                let nr = r + dr * i;
                let nc = c + dc * i;
                if (nr < 0 || nr >= rows || nc < 0 || nc >= columns || board[nr][nc] !== color) {
                    return false;
                }
            }
            return true;
        }

        function declareWinner(player) {
            const player1Input = document.getElementById('player1-input').value;
            const player2Input = document.getElementById('player2-input').value;
            let winnerMessage = player === 'red' ? `Joueur 1 (Rouge) a gagné et reçoit: ${player2Input}` : `Joueur 2 (Jaune) a gagné et reçoit: ${player1Input}`;
            alert(winnerMessage);
            restartGame();
        }

        function blurInput(inputId) {
            document.getElementById(inputId).classList.add('blurred');
        }

        function restartGame() {
            createBoard();
            currentPlayer = 'red';
        }

        createBoard();
    </script>
</body>
</html>
